/**!
 * Rotten Tomatoes API AngularJS Service v0.0.1
 * http://hilios.github.io/angular-rotten-tomatoes/
 * Copyright (c) 2014 Edson Hilios
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 */
!function(e){function n(e){function n(n){return e.request("/lists/dvds/top_rentals.json",n,["limit","country"])}function t(n){return e.request("/lists/dvds/current_releases.json",n,["pageLimit","page","country"])}function i(n){return e.request("/lists/dvds/new_releases.json",n,["pageLimit","page","country"])}function r(n){return e.request("/lists/dvds/upcoming.json",n,["pageLimit","page","country"])}return{topRentals:n,currentReleases:t,newReleases:i,upcomingDvds:r}}function t(e){function n(n){return e.requestId(n,"/movies/:id.json")}function t(n,t){return e.requestId(n,"/movies/:id/reviews.json",t,["reviewType","pageLimit","page","country"])}function i(n){return e.requestId(n,"/movies/:id/cast.json")}function r(n,t){return e.requestId(n,"/movies/:id/similar.json",t,["limit"])}function o(n){return e.requestId(n,"/movies/:id/clips.json")}function s(n){return e.request("/movies/movie_alias.json",{id:n,alias:"imdb"})}return{movieInfo:n,movieReviews:t,movieCast:i,movieSimilar:r,movieClips:o,movieAlias:s}}function i(n){function t(t,i){return e.extend(i||{},{q:t}),n.request("/movies.json",i,["pageLimit","page","country"])}function i(e){return n.request("/lists/movies/box_office.json",e,["limit","country"])}function r(e){return n.request("/lists/movies/in_theaters.json",e,["pageLimit","page","country"])}function o(e){return n.request("/lists/movies/opening.json",e,["limit","country"])}function s(e){return n.request("/lists/movies/upcoming.json",e,["pageLimit","page","country"])}return{search:t,boxOffice:i,inTheaters:r,opening:o,upcoming:s}}function r(){function r(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(t=t,n[t.replace(/([A-Z]{1,})/g,"_$1").toLowerCase()]=e[t]);return n}function o(o,u){if(!e.isString(s.key))throw"Missing Rotten Tomatoes API key.";var a={},c={};return c.request=function(n,t){var i=t||{},a=s.url+n.replace(/^\//,""),c=e.copy(s.config);return e.extend(c.params,r(i)),u.debug("Requesting "+a),o.jsonp(a,c).then(function(e){return u.debug(e.status+" "+e.config.url),e},function(e){return u.error(e),e})},c.requestId=function(e,n,t){return c.request(n.replace(/:id/,e),t)},c.config=s.config,e.extend(a,{$api:c}),e.extend(a,new t(c)),e.extend(a,new i(c)),e.extend(a,new n(c)),a}var s=this;s.key=null,s.apiVersion="v1.0",s.url="http://api.rottentomatoes.com/api/public/:version/".replace(/:version/,s.apiVersion),s.config={params:{apikey:null,callback:"JSON_CALLBACK"}},s.setKey=function(e){s.key=s.config.params.apikey=e},s.setDefaults=function(n){return s.config=e.extend(s.config.params,n||{}),s.config},this.$get=["$http","$log",o]}e.module("ngRottenTomatoes",[]).provider("rottenTomatoes",r)}(window.angular);